<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Web Target Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .description {
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .panels {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .panel {
            flex: 1;
            min-width: 300px;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .panel h2 {
            color: #3498db;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="text"], select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        button i {
            margin-right: 8px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 5px solid #3498db;
        }
        
        .result h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .sql-code {
            background-color: #2c3e50;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: monospace;
            font-size: 16px;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .copy-btn {
            background-color: #27ae60;
        }
        
        .copy-btn:hover {
            background-color: #219653;
        }
        
        .tables {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .table-item {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .table-item:hover {
            background-color: #cce5f7;
            transform: translateY(-3px);
        }
        
        .table-item.active {
            background-color: #3498db;
            color: white;
        }
        
        .database-view {
            margin-top: 30px;
        }
        
        .database-view h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background-color: #3498db;
            color: white;
        }
        
        .data-table tr:hover {
            background-color: #f5f5f5;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            background-color: #f8d7da;
            color: #721c24;
            border-left: 5px solid #f5c6cb;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            border-left: 5px solid #c3e6cb;
        }
        
        @media (max-width: 768px) {
            .panels {
                flex-direction: column;
            }
            
            .tables {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-database"></i> SQL Web Target Generator</h1>
            <p class="description">Alat untuk menghasilkan perintah SQL dan melihat data dalam database simulasi</p>
        </header>
        
        <div class="panels">
            <div class="panel">
                <h2><i class="fas fa-cogs"></i> Generator SQL</h2>
                
                <div class="form-group">
                    <label>Pilih Tabel:</label>
                    <div class="tables">
                        <div class="table-item active" data-table="users">
                            <i class="fas fa-users"></i> Users
                        </div>
                        <div class="table-item" data-table="products">
                            <i class="fas fa-box"></i> Products
                        </div>
                        <div class="table-item" data-table="orders">
                            <i class="fas fa-shopping-cart"></i> Orders
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="operation">Jenis Operasi:</label>
                    <select id="operation">
                        <option value="SELECT">SELECT (Mengambil data)</option>
                        <option value="INSERT">INSERT (Menambah data)</option>
                        <option value="UPDATE">UPDATE (Memperbarui data)</option>
                        <option value="DELETE">DELETE (Menghapus data)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="columns">Kolom (pisahkan dengan koma):</label>
                    <input type="text" id="columns" placeholder="nama, email, umur">
                </div>
                
                <div class="form-group">
                    <label for="values">Nilai (pisahkan dengan koma, untuk INSERT):</label>
                    <input type="text" id="values" placeholder="John, john@example.com, 25">
                </div>
                
                <div class="form-group">
                    <label for="condition">Kondisi (WHERE):</label>
                    <input type="text" id="condition" placeholder="id = 1">
                </div>
                
                <button id="generate-btn">
                    <i class="fas fa-code"></i> Generate SQL
                </button>
                
                <div class="result">
                    <h3>Hasil Kode SQL:</h3>
                    <div class="sql-code" id="sql-output">
                        -- Hasil kode SQL akan muncul di sini
                    </div>
                    <button class="copy-btn" id="copy-btn">
                        <i class="fas fa-copy"></i> Salin ke Clipboard
                    </button>
                </div>
            </div>
            
            <div class="panel">
                <h2><i class="fas fa-play-circle"></i> Eksekusi Simulasi</h2>
                
                <div class="form-group">
                    <label for="custom-sql">SQL Kustom (untuk simulasi):</label>
                    <textarea id="custom-sql" placeholder="Masukkan perintah SQL yang ingin dijalankan..."></textarea>
                </div>
                
                <button id="execute-btn">
                    <i class="fas fa-play"></i> Jalankan Perintah
                </button>
                
                <div id="execute-result"></div>
                
                <div class="result">
                    <h3>Database Saat Ini:</h3>
                    <div id="database-state">
                        <p>Data akan ditampilkan di bawah</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="database-view">
            <h2><i class="fas fa-table"></i> Data dalam Database Simulasi</h2>
            
            <h3>Tabel Users</h3>
            <table class="data-table" id="users-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nama</th>
                        <th>Email</th>
                        <th>Umur</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data akan diisi oleh JavaScript -->
                </tbody>
            </table>
            
            <h3>Tabel Products</h3>
            <table class="data-table" id="products-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nama Produk</th>
                        <th>Harga</th>
                        <th>Stok</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data akan diisi oleh JavaScript -->
                </tbody>
            </table>
            
            <h3>Tabel Orders</h3>
            <table class="data-table" id="orders-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>User ID</th>
                        <th>Produk</th>
                        <th>Jumlah</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data akan diisi oleh JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inisialisasi database jika belum ada
            initializeDatabase();
            
            // Referensi elemen DOM
            const tableItems = document.querySelectorAll('.table-item');
            const operationSelect = document.getElementById('operation');
            const columnsInput = document.getElementById('columns');
            const valuesInput = document.getElementById('values');
            const conditionInput = document.getElementById('condition');
            const generateBtn = document.getElementById('generate-btn');
            const sqlOutput = document.getElementById('sql-output');
            const copyBtn = document.getElementById('copy-btn');
            const customSqlInput = document.getElementById('custom-sql');
            const executeBtn = document.getElementById('execute-btn');
            const executeResult = document.getElementById('execute-result');
            
            let selectedTable = 'users';
            
            // Table selection
            tableItems.forEach(item => {
                item.addEventListener('click', function() {
                    tableItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    selectedTable = this.getAttribute('data-table');
                });
            });
            
            // Generate SQL
            generateBtn.addEventListener('click', function() {
                const operation = operationSelect.value;
                const columns = columnsInput.value.trim();
                const values = valuesInput.value.trim();
                const condition = conditionInput.value.trim();
                
                let sql = '';
                
                switch(operation) {
                    case 'SELECT':
                        sql = `SELECT ${columns || '*'} FROM ${selectedTable}`;
                        if (condition) sql += ` WHERE ${condition}`;
                        sql += ';';
                        break;
                        
                    case 'INSERT':
                        if (columns && values) {
                            const colArray = columns.split(',').map(c => c.trim());
                            const valArray = values.split(',').map(v => `'${v.trim()}'`);
                            sql = `INSERT INTO ${selectedTable} (${colArray.join(', ')}) VALUES (${valArray.join(', ')});`;
                        } else {
                            sql = '-- Harap masukkan kolom dan nilai';
                        }
                        break;
                        
                    case 'UPDATE':
                        if (columns && condition) {
                            const updates = columns.split(',').map(col => {
                                const [key, value] = col.split('=').map(item => item.trim());
                                return `${key} = '${value}'`;
                            }).join(', ');
                            
                            sql = `UPDATE ${selectedTable} SET ${updates} WHERE ${condition};`;
                        } else {
                            sql = '-- Harap masukkan kolom=nilai dan kondisi';
                        }
                        break;
                        
                    case 'DELETE':
                        sql = `DELETE FROM ${selectedTable}`;
                        if (condition) sql += ` WHERE ${condition}`;
                        sql += ';';
                        break;
                }
                
                sqlOutput.textContent = sql;
            });
            
            // Copy to clipboard
            copyBtn.addEventListener('click', function() {
                const textArea = document.createElement('textarea');
                textArea.value = sqlOutput.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const alert = document.createElement('div');
                alert.className = 'alert success';
                alert.innerHTML = '<i class="fas fa-check-circle"></i> Kode SQL disalin ke clipboard!';
                executeResult.appendChild(alert);
                
                setTimeout(() => {
                    alert.remove();
                }, 3000);
            });
            
            // Execute custom SQL
            executeBtn.addEventListener('click', function() {
                const sql = customSqlInput.value.trim();
                executeResult.innerHTML = '';
                
                if (!sql) {
                    const alert = document.createElement('div');
                    alert.className = 'alert';
                    alert.innerHTML = '<i class="fas fa-exclamation-circle"></i> Masukkan perintah SQL terlebih dahulu';
                    executeResult.appendChild(alert);
                    return;
                }
                
                try {
                    // Simulasi eksekusi SQL
                    const result = simulateSQLExecution(sql);
                    
                    const alert = document.createElement('div');
                    alert.className = 'alert success';
                    alert.innerHTML = `<i class="fas fa-check-circle"></i> Berhasil menjalankan perintah. ${result}`;
                    executeResult.appendChild(alert);
                    
                    // Perbarui tampilan database
                    displayDatabase();
                } catch (e) {
                    const alert = document.createElement('div');
                    alert.className = 'alert';
                    alert.innerHTML = `<i class="fas fa-exclamation-circle"></i> Error: ${e.message}`;
                    executeResult.appendChild(alert);
                }
            });
            
            // Inisialisasi database di localStorage
            function initializeDatabase() {
                if (!localStorage.getItem('sql_web_db_initialized')) {
                    // Data contoh untuk tabel users
                    const users = [
                        { id: 1, name: 'Ahmad Santoso', email: 'ahmad@example.com', age: 28 },
                        { id: 2, name: 'Budi Raharjo', email: 'budi@example.com', age: 32 },
                        { id: 3, name: 'Citra Lestari', email: 'citra@example.com', age: 24 }
                    ];
                    
                    // Data contoh untuk tabel products
                    const products = [
                        { id: 1, name: 'Laptop ASUS', price: 8500000, stock: 10 },
                        { id: 2, name: 'Smartphone Samsung', price: 4500000, stock: 15 },
                        { id: 3, name: 'Tablet iPad', price: 6000000, stock: 8 }
                    ];
                    
                    // Data contoh untuk tabel orders
                    const orders = [
                        { id: 1, user_id: 1, product: 'Laptop ASUS', quantity: 1 },
                        { id: 2, user_id: 2, product: 'Smartphone Samsung', quantity: 2 },
                        { id: 3, user_id: 3, product: 'Tablet iPad', quantity: 1 }
                    ];
                    
                    localStorage.setItem('db_users', JSON.stringify(users));
                    localStorage.setItem('db_products', JSON.stringify(products));
                    localStorage.setItem('db_orders', JSON.stringify(orders));
                    localStorage.setItem('sql_web_db_initialized', 'true');
                }
                
                // Tampilkan data dari localStorage
                displayDatabase();
            }
            
            // Tampilkan data database
            function displayDatabase() {
                // Tampilkan data users
                const users = JSON.parse(localStorage.getItem('db_users') || '[]');
                const usersTable = document.querySelector('#users-table tbody');
                usersTable.innerHTML = '';
                
                users.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>${user.age}</td>
                    `;
                    usersTable.appendChild(row);
                });
                
                // Tampilkan data products
                const products = JSON.parse(localStorage.getItem('db_products') || '[]');
                const productsTable = document.querySelector('#products-table tbody');
                productsTable.innerHTML = '';
                
                products.forEach(product => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${product.id}</td>
                        <td>${product.name}</td>
                        <td>Rp ${product.price.toLocaleString('id-ID')}</td>
                        <td>${product.stock}</td>
                    `;
                    productsTable.appendChild(row);
                });
                
                // Tampilkan data orders
                const orders = JSON.parse(localStorage.getItem('db_orders') || '[]');
                const ordersTable = document.querySelector('#orders-table tbody');
                ordersTable.innerHTML = '';
                
                orders.forEach(order => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${order.id}</td>
                        <td>${order.user_id}</td>
                        <td>${order.product}</td>
                        <td>${order.quantity}</td>
                    `;
                    ordersTable.appendChild(row);
                });
            }
            
            // Simulasi eksekusi SQL
            function simulateSQLExecution(sql) {
                const lowerSql = sql.toLowerCase();
                
                if (lowerSql.startsWith('select')) {
                    // Simulasi SELECT
                    if (lowerSql.includes('from users')) {
                        const users = JSON.parse(localStorage.getItem('db_users') || '[]');
                        return `Ditemukan ${users.length} records`;
                    } else if (lowerSql.includes('from products')) {
                        const products = JSON.parse(localStorage.getItem('db_products') || '[]');
                        return `Ditemukan ${products.length} records`;
                    } else if (lowerSql.includes('from orders')) {
                        const orders = JSON.parse(localStorage.getItem('db_orders') || '[]');
                        return `Ditemukan ${orders.length} records`;
                    }
                    return 'Query executed successfully';
                } else if (lowerSql.startsWith('insert')) {
                    // Simulasi INSERT
                    if (lowerSql.includes('into users')) {
                        const users = JSON.parse(localStorage.getItem('db_users') || '[]');
                        const newId = users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1;
                        
                        // Ekstrak nilai dari SQL (sangat disederhanakan)
                        const valuesMatch = sql.match(/values\s*\(([^)]+)\)/i);
                        if (valuesMatch) {
                            const values = valuesMatch[1].split(',').map(v => v.trim().replace(/'/g, ''));
                            users.push({
                                id: newId,
                                name: values[0] || 'Unknown',
                                email: values[1] || 'no-email@example.com',
                                age: parseInt(values[2]) || 0
                            });
                            localStorage.setItem('db_users', JSON.stringify(users));
                            return '1 record inserted into users';
                        }
                    }
                    return 'Insert operation simulated';
                } else if (lowerSql.startsWith('update')) {
                    // Simulasi UPDATE
                    return 'Update operation simulated';
                } else if (lowerSql.startsWith('delete')) {
                    // Simulasi DELETE
                    return 'Delete operation simulated';
                }
                
                throw new Error('Perintah SQL tidak dikenali');
            }
        });
    </script>
</body>
</html>
